MI.Slide=function(b){function d(c){c=UI.E(c).target;a.page(c.num)}var a=this;a._parent=b.parent||b.target.parentNode.parentNode;a._body=b.target;a._list=UI.GC(b.target,"ul")[0];a._li=UI.GC(a._body,"li");a._page=a.$(".page");a._prev=a.$(".prev");a._next=a.$(".next");if(!a._list||!a._li.length)return a;a.stepSmall=UI.width(a._li[0]);a.perPage=parseInt(UI.width(a._body)/a.stepSmall);a.total=Math.ceil(a._li.length/a.perPage);a.step=a.perPage*a.stepSmall;a._page.innerHTML=(new UI.tmplString(b.tmpl||a.tmpl.page))({num:a.total});a.page();if(a._prev){UI.EA(a._prev,"click",function(){a.prev()});UI.EA(a._prev,"click",MI.Slide.click)}if(a._next){UI.EA(a._next,"click",function(){a.next()});UI.EA(a._next,"click",MI.Slide.click)}UI.each(a._page.childNodes,function(c,e){c.num=e+1;UI.EA(c,"click",MI.Slide.click);UI.EA(c,"click",d);UI.EA(c,"mouseover",function(){a.pause=1});UI.EA(c,"mouseout",function(){a.pause=0})});UI.EA(a._list,"mouseover",function(){a.pause=1});UI.EA(a._list,"mouseout",function(){a.pause=0});if(a._page.childNodes.length>1)b.auto&&setInterval(function(){a.pause||a.next()},b.auto);else UI.hide(a._page);a.call=b.call};MI.Slide.click=function(b){b=UI.E(b);b.prevent();b.target.blur()};MI.Slide.prototype={loop:1,cur:1,auto:0,pause:0,tmpl:{page:'<%for(var i=0;i<num;i++){%><a href="#" class="<%if(i==0){%>on<%}%>"></a><%}%>'},$:function(b){return UI.GC(this._parent,b)[0]},page:function(b){this.cur=b||this.cur;if(this.cur<1)this.cur=this.loop?this.total:1;else if(this.cur>this.total)this.cur=this.loop?1:this.total;UI.removeClass(UI.GC(this._page,".on")[0],"on");UI.addClass(this._page.childNodes[this.cur-1],"on");this.scroll();this.call&&this.call(this.cur)},prev:function(){this.cur--;this.page()},next:function(){this.cur++;this.page()},scroll:function(){clearInterval(this.delay);this.delay=UI.animate(this._list,"marginLeft",-(this.cur-1)*this.step)}};/*  |xGv00|a7bdee5ea4fa71b9381887d5de34631a */