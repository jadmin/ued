var Friend={loginUserId:"",ifrAddFrd:"ifrAddFrd",_callback:"addFriendCall",_form:"addFrdForm",setLoginUser:function(A){this.loginUserId=A},add:function(userName){if(""==this.loginUserId){this._showLoginLayer();return }Club.syncGet("/club/common/getuserinfo",{},function(xhr){var result=eval("("+xhr.responseText+")");if(typeof result=="undefined"){return }if(result.is_login){Friend._showAddLayer(userName)}else{Friend._showLoginLayer()}})},_showLoginLayer:function(){var B="https://passport.baidu.com/?login&psp_tt=2&tpl=tb&fu="+encodeURIComponent("http://static.tieba.baidu.com/tb/club/pass_jump.html?type=1")+"&u="+encodeURIComponent(window.location.href);var A=Fe.Dialog.open(B,{title:"您尚未登录",contentType:"iframe",width:370,height:300})},_showAddLayer:function(D){var A="Friend.submitAddReq";var C='<div style="padding:10px 0 0 10px;"><span style="font-size:14px; line-height:28px;">您正在添加&nbsp;'+D+'&nbsp;为好友<br/>和您的新朋友打个招呼吧！</span><br/><textarea id="umword" style="width:320px; height:60px;" cols="30" rows="4"></textarea><p style="margin:4px 0 0 0;">不超过100个字.例如:我们都喜欢旅行啊!我还很喜欢您的相册啊!</p><p style="color:#ff0000;display:none;margin:4px 0 0 0;" id="frderr">您好，您输入的文字已经超过100字。</p><input value="确定" id="addfrdbn" onclick="'+A+"('"+D+'\');" type="button" style="margin-top:10px;" /></div>';var B=Fe.Dialog.open(C,{title:"添加好友",width:500,height:210})},submitAddReq:function(userName){var msg=Fe.String.trim(document.getElementById("umword").value);if(msg.length>100){document.getElementById("frderr").style.display="";return false}Club.syncGet("/club/common/getuserinfo",{},function(xhr){var result=eval("("+xhr.responseText+")");if(typeof result=="undefined"){return }if(result.is_login){var form=document.getElementById(Friend._form);form.word.value=userName;form.callback.value=Friend._callback;form.spurl.value=window.location.href;form.um.value=msg;form.submit()}else{Friend._showLoginLayer()}})}};function addFriendCall(D,C){Fe.Dialog.close();document.getElementById(Friend.ifrAddFrd).src="about:blank";var A='<div style="font-size:14px; padding:28px 0 0 20px;">'+C+"</div>";var B=Fe.Dialog.open(A,{title:"添加好友",buttonClose:false,width:350,height:100});setTimeout(function(){Fe.Dialog.close();window.location.reload(true)},500)};