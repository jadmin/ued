<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>JS实现的3D圣诞树</title>
</head>
<body>
<p><span class="Apple-style-span" style="font-family: Cambria,'Microsoft YaHei',微软雅黑,Tahoma,SimSun; line-height: 24px; color: rgb(34, 34, 34);">下面的3D圣诞树神奇效果是西班牙程序员Roman Cortes的js1k编程比赛参赛作品。需要注意，它也是对浏览器JavaScript引擎能力的很好检验。</span><strong><span class="Apple-style-span" style="font-family: Cambria,'Microsoft YaHei',微软雅黑,Tahoma,SimSun; line-height: 24px; color: rgb(34, 34, 34);">只有现代浏览器</span></strong><span style="font-size: smaller;"><span class="Apple-style-span" style="font-family: Cambria,'Microsoft YaHei',微软雅黑,Tahoma,SimSun; line-height: 24px; color: rgb(34, 34, 34);">（程序员同学，你们懂的</span><span class="Apple-style-span" style="font-family: Cambria,'Microsoft YaHei',微软雅黑,Tahoma,SimSun; line-height: 24px; color: rgb(34, 34, 34);">）</span></span><strong><span class="Apple-style-span" style="font-family: Cambria,'Microsoft YaHei',微软雅黑,Tahoma,SimSun; line-height: 24px; color: rgb(34, 34, 34);">才能正常查看</span></strong><span class="Apple-style-span" style="font-family: Cambria,'Microsoft YaHei',微软雅黑,Tahoma,SimSun; line-height: 24px; color: rgb(34, 34, 34);">。经测试，Chrome非常流畅，Opera 11也没有问题，Firefox较慢，IE各版本包括IE 9 beta都不支持。（<strong>更正</strong>：IE 9 beta可以查看，但非常慢，以至于测试的时候心急的编辑没有看到动画效果。感谢@<a href="http://t.sina.com.cn/1408827293" style="text-decoration: none; color: rgb(0, 130, 203);">kaverjody</a>指出。）</span></p>
<p><iframe height="400px" frameborder="0" width="500px" scrolling="no" noresize="noresize" src="http://subject.csdn.net/merrychristmas2010.htm"/></p>
<p><span class="Apple-style-span" style="font-family: Cambria,'Microsoft YaHei',微软雅黑,Tahoma,SimSun; line-height: 24px; color: rgb(34, 34, 34);">这个比赛要求用1024字节以内的JavaScript代码实现一个效果。</span>
<p><span xmlns="http://www.w3.org/1999/xhtml" class="Apple-style-span" style="font-family: Cambria,'Microsoft YaHei',微软雅黑,Tahoma,SimSun; line-height: 24px; color: rgb(34, 34, 34);">M=Math;Q=M.random;J=[];U=16;T=M.sin;E=M.sqrt;for(O=k=0;x=z=j=i=k&lt;200;)with(M[k]=k?c.cloneNode(0):c){width=height=k?32:W=446;with(getContext('2d'))if(k&gt;10|!k)for(font='60px Impact',V='rgba(';I=i*U,fillStyle=k?k==13?V+'205,205,215,.15)':V+(147+I)+','+(k%2?128+I:0)+','+I+',.5)':'#cca',i&lt;7;)beginPath(fill(arc(U-i/3,24-i/2,k==13?4-(i++)/2:8-i++,0,M.PI*2,1)));else for(;x=T(i),y=Q()*2-1,D=x*x+y*y,B=E(D-x/.9-1.5*y+1),R=67*(B+1)*(L=k/9+.8)&gt;&gt;1,i++&lt;W;)if(D&lt;1)beginPath(strokeStyle=V+R+','+(R+B*L&gt;&gt;0)+',40,.1)'),moveTo(U+x*8,U+y*8),lineTo(U+x*U,U+y*U),stroke();for(y=H=k+E(k++)*25,R=Q()*W;P=3,j&lt;H;)J[O++]=[x+=T(R)*P+Q()*6-3,y+=Q()*U-8,z+=T(R-11)*P+Q()*6-3,j/H*20+((j+=U)&gt;H&amp;Q()&gt;.8?Q(P=9)*4:0)&gt;&gt;1]}setInterval(function G(m,l){A=T(D-11);if(l)return(m[2]-l[2])*A+(l[0]-m[0])*T(D);a.clearRect(0,0,W,W);J.sort(G);for(i=0;L=J[i++];a.drawImage(M[L[3]+1],207+L[0]*A+L[2]*T(D)&gt;&gt;0,L[1]&gt;&gt;1)){if(i==2e3)a.fillText('Merry Christmas!',U,345);if(!(i%7))a.drawImage(M[13],((157*(i*i)+T(D*5+i*i)*5)%W)&gt;&gt;0,((113*i+(D*i)/60)%(290+i/99))&gt;&gt;0);}D+=.02},1)</span></p>
</body>
</html>